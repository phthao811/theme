{%- if block.settings.picker_type == 'button' -%}
                <variant-radios class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}">

                  {%- for option in product.options_with_values -%}
                    {% liquid
                      assign isColor = false
                      assign optionName = option.name | handleize | downcase
                      assign setting_option_name = settings.option_name | handleize | downcase
                      if optionName contains 'colo' or optionName == setting_option_name
                        assign isColor = true
                      endif

                      assign option_index = forloop.index
                    %}

                      <fieldset class="js product-form__input variants-item-{{ option.name | downcase | replace: " ", "-" }}">
                          <legend class="form__label">{{ option.name }}</legend>

                          {%- for value in option.values -%}
                              {% liquid                           
                                for variant in product.variants
                                  assign vOption = 'option' | append: option_index
                                  if value == variant[vOption]
                                    assign currenVariant = variant
                                    break
                                  endif
                                endfor
                                assign hasImage = false
                                if isColor and currenVariant.image
                                  assign hasImage = true
                                endif 
                              %}
                        
                          <input type="radio" id="{{ section.id }}-{{ option.name }}-{{ forloop.index0 }}"
                                 name="{{ option.name }}"
                                 value="{{ value | escape }}"
                                 form="product-form-{{ section.id }}"
                                 {% if option.selected_value == value %}checked{% endif %}
                                 >
                          <label for="{{ section.id }}-{{ option.name }}-{{ forloop.index0 }}" class="variant-{{ value | downcase | replace: " ", "-" | append: " " }} {%- if hasImage -%} label-image{%- endif -%}">

                            {%- if hasImage -%}
                            	<img loading="lazy" src="{{ currenVariant.image.src | image_url: width: 50 }}" alt="{{ option.name }}" title="{{ value | downcase | replace: " ", "-" | append: " " }}" width="auto" height="auto">
                            {%- else -%}

                              {% liquid
                                assign optionName = option.name | handleize | downcase
                                assign setting_option_name = settings.option_name | handleize | downcase
                                assign image_color = ''
                                assign value_name = value | escape | downcase
                                  
                                if optionName == setting_option_name and settings.shop_by_color_enable
                                  assign filter_color = settings.filter_color_1 | escape | downcase
                                  if value_name == filter_color and settings.image_color_1
                                    assign image_color = settings.image_color_1
                                  endif

                                  assign filter_color = settings.filter_color_2 | escape | downcase
                                  if value_name == filter_color and settings.image_color_2
                                    assign image_color = settings.image_color_2
                                  endif

                                  assign filter_color = settings.filter_color_3 | escape | downcase
                                  if value_name == filter_color and settings.image_color_3
                                    assign image_color = settings.image_color_3
                                  endif

                                  assign filter_color = settings.filter_color_4 | escape | downcase
                                  if value_name == filter_color and settings.image_color_4
                                    assign image_color = settings.image_color_4
                                  endif

                                  assign filter_color = settings.filter_color_5 | escape | downcase
                                  if value_name == filter_color and settings.image_color_5
                                    assign image_color = settings.image_color_5
                                  endif

                                  assign filter_color = settings.filter_color_6 | escape | downcase
                                  if value_name == filter_color and settings.image_color_6
                                    assign image_color = settings.image_color_6
                                  endif

                                  assign filter_color = settings.filter_color_7 | escape | downcase
                                  if value_name == filter_color and settings.image_color_7
                                    assign image_color = settings.image_color_7
                                  endif

                                  assign filter_color = settings.filter_color_8 | escape | downcase
                                  if value_name == filter_color and settings.image_color_8
                                    assign image_color = settings.image_color_8
                                  endif

                                  assign filter_color = settings.filter_color_9 | escape | downcase
                                  if value_name == filter_color and settings.image_color_9
                                    assign image_color = settings.image_color_9
                                  endif

                                  assign filter_color = settings.filter_color_10 | escape | downcase
                                  if value_name == filter_color and settings.image_color_10
                                    assign image_color = settings.image_color_10
                                  endif

                                  assign filter_color = settings.filter_color_11 | escape | downcase
                                  if value_name == filter_color and settings.image_color_11
                                    assign image_color = settings.image_color_11
                                  endif

                                  assign filter_color = settings.filter_color_12 | escape | downcase
                                  if value_name == filter_color and settings.image_color_12
                                    assign image_color = settings.image_color_12
                                  endif

                                  assign filter_color = settings.filter_color_13 | escape | downcase
                                  if value_name == filter_color and settings.image_color_13
                                    assign image_color = settings.image_color_13
                                  endif

                                  assign filter_color = settings.filter_color_14 | escape | downcase
                                  if value_name == filter_color and settings.image_color_14
                                    assign image_color = settings.image_color_14
                                  endif

                                  assign filter_color = settings.filter_color_15 | escape | downcase
                                  if value_name == filter_color and settings.image_color_15
                                    assign image_color = settings.image_color_15
                                  endif

                                  assign filter_color = settings.filter_color_16 | escape | downcase
                                  if value_name == filter_color and settings.image_color_16
                                    assign image_color = settings.image_color_16
                                  endif

                                  assign filter_color = settings.filter_color_17 | escape | downcase
                                  if value_name == filter_color and settings.image_color_17
                                    assign image_color = settings.image_color_17
                                  endif

                                  assign filter_color = settings.filter_color_18 | escape | downcase
                                  if value_name == filter_color and settings.image_color_18
                                    assign image_color = settings.image_color_18
                                  endif

                                  assign filter_color = settings.filter_color_19 | escape | downcase
                                  if value_name == filter_color and settings.image_color_19
                                    assign image_color = settings.image_color_19
                                  endif

                                  assign filter_color = settings.filter_color_20 | escape | downcase
                                  if value_name == filter_color and settings.image_color_20
                                    assign image_color = settings.image_color_20
                                  endif
                                endif
                              %}
                            
                            	{%- if image_color != '' -%}
                            		<img loading="lazy" width="auto" height="auto" src="{{ image_color | image_url: width: 50 }}" alt="{{ option.name }}" title="{{ value }}">
                            	{%- else -%}
                            		{{ value }}
                            	{%- endif -%}
                            {%- endif -%}                
                            
                            
                            	
                          </label>
                          {%- endfor -%}
                        </fieldset>
                  {%- endfor -%}

                  <script type="application/json">
                    {{ product.variants | json }}
                  </script>
                </variant-radios>
              {%- else -%}
                <variant-selects class="no-js-hidden" data-section="{{ section.id }}" data-url="{{ product.url }}">
                  {%- for option in product.options_with_values -%}
                    <div class="product-form__input product-form__input--dropdown">
                      <label class="form__label" for="Option-{{ section.id }}-{{ forloop.index0 }}">
                        {{ option.name }}
                      </label>
                      <div class="select">
                        <select id="Option-{{ section.id }}-{{ forloop.index0 }}"
                          class="select__select"
                          name="options[{{ option.name | escape }}]"
                          form="product-form-{{ section.id }}"
                        >
                          {%- for value in option.values -%}
                            <option value="{{ value | escape }}" {% if option.selected_value == value %}selected="selected"{% endif %}>
                              {{ value }}
                            </option>
                          {%- endfor -%}
                        </select>
                        {% render 'icon-caret' %}
                      </div>
                    </div>
                  {%- endfor -%}

                  <script type="application/json">
                    {{ product.variants | json }}
                  </script>
                </variant-selects>
              {%- endif -%}
            

            <noscript>
              <div class="product-form__input{% if product.has_only_default_variant %} hidden{% endif %}">
                <label class="form__label" for="Variants-{{ section.id }}">{{ 'products.product.product_variants' | t }}</label>
                <div class="select">
                  <select name="id" id="Variants-{{ section.id }}" class="select__select" form="product-form">
                    {%- for variant in product.variants -%}
                      <option
                        {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                        {% if variant.available == false %}disabled{% endif %}
                        value="{{ variant.id }}"
                      >
                        {{ variant.title }}
                        {%- if variant.available == false %} - {{ 'products.product.sold_out' | t }}{% endif %}
                        - {{ variant.price | money | strip_html }}
                      </option>
                    {%- endfor -%}
                  </select>
                  {% render 'icon-caret' %}
                </div>
              </div>
            </noscript>